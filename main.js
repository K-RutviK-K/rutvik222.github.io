function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(window,document){var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",InvalidCharacterError=function(e){this.message=e},btoa,atob;InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError";try{btoa=window.btoa,atob=window.atob,atob(btoa("x"))}catch(e){btoa=function(e){for(var t,n,r=String(e),o=0,i=chars,a="";r.charAt(0|o)||(i="=",o%1);a+=i.charAt(63&t>>8-o%1*8)){if((n=r.charCodeAt(o+=.75))>255)throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return a},atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=chars.indexOf(r);return a}}"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e.apply(this,[this[t],t,this])}),Function.prototype.bind||(Function.prototype.bind=function(e){var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o});var addListener=function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)},removeListener=function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n)},domReady=function(){var e,t,n,r=void 0!==window&&window.document,o=!r,i=r?document:null,a=[];function c(){var e=a;o&&e.length&&(a=[],function(e){var t;for(t=0;t<e.length;t+=1)e[t](i)}(e))}function s(){o||(o=!0,n&&clearInterval(n),c())}if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1);else if(window.attachEvent){window.attachEvent("onload",s),t=document.createElement("div");try{e=null===window.frameElement}catch(e){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),s()}catch(e){}},30))}"complete"===document.readyState&&s()}return function e(t){return o?t(i):a.push(t),e}}(),UrlSafeBase64Encode=function(e){return btoa(window.unescape(window.encodeURIComponent(e))).replace(/=|\+|\//g,function(e){return"+"==e?"-":"/"==e?"_":""})},addUrlParam=function(e,t,n){if("object"!=_typeof2(t)){var r=t;(t={})[r]=n}for(var o in t){n=t[o];var i=o+"="+encodeURIComponent(n),a=e.indexOf("?");e+=a>-1?(a<e.length?"&":"")+i:"?"+i}return e},$isset=function(e){return null!=e},$pick=function(e,t){return $isset(e)?e:t},store=null,addPop,checkPopLimits,preparePop,executePop,executeProxy,executeProxyTimer,orgWindowOpen,popQueue,currentPop,executeCount,loadLog;!function(e){if("object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{void 0!==window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,store=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r=e("../src/store-engine"),o=e("../storages/all"),i=[e("../plugins/json2")];t.exports=r.createStore(o,i)},{"../plugins/json2":2,"../src/store-engine":4,"../storages/all":6}],2:[function(e,t,n){"use strict";t.exports=function(){return e("./lib/json2"),{}}},{"./lib/json2":3}],3:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,a,c=gap,s=t[e];switch(s&&"object"===(void 0===s?"undefined":_typeof(s))&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),void 0===s?"undefined":_typeof(s)){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=s.length,n=0;n<i;n+=1)a[n]=str(n,s)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+c+"]":"["+a.join(",")+"]",gap=c,o}if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&((o=str(r=rep[n],s))&&a.push(quote(r)+(gap?": ":":")+o));else for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&((o=str(r,s))&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+c+"}":"{"+a.join(",")+"}",gap=c,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!==(void 0===t?"undefined":_typeof(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"===(void 0===o?"undefined":_typeof(o)))for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(r=walk(o,n))?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],4:[function(e,t,n){"use strict";function r(e,t,n){n||(n=""),e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var r=n?"__storejs_"+n+"_":"",o=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h=u({_namespacePrefix:r,_namespaceRegexp:o,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=i(arguments,0),r=this,o=[function(){if(n)return c(arguments,function(e,n){t[n]=e}),n.apply(r,t)}].concat(t);return e.apply(r,o)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(l(e))c(e,function(e){t._addPlugin(e)});else if(!a(this.plugins,function(t){return e===t})){if(this.plugins.push(e),!d(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!f(n))throw new Error("Plugins must return an object of function properties");c(n,function(n,r){if(!d(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)})}},addStorage:function(e){(function(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)})("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},p,{plugins:[]});return h.raw={},c(h,function(e,t){d(e)&&(h.raw[t]=s(h,e))}),c(e,function(e){h._addStorage(e)}),c(t,function(e){h._addPlugin(e)}),h}var o=e("./util"),i=o.slice,a=o.pluck,c=o.each,s=o.bind,u=o.create,l=o.isList,d=o.isFunction,f=o.isObject;t.exports={createStore:r};var p={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each(function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return r.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return r(this.storage,this.plugins,e)}}},{"./util":5}],5:[function(e,t,n){(function(e){"use strict";function n(e,t){return Array.prototype.slice.call(e,t||0)}function r(e,t){o(e,function(e,n){return t(e,n),!1})}function o(e,t){if(i(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function i(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}var a=Object.assign?Object.assign:function(e,t,n,o){for(var i=1;i<arguments.length;i++)r(Object(arguments[i]),function(t,n){e[n]=t});return e},c=function(){if(Object.create)return function(e,t,r,o){var i=n(arguments,1);return a.apply(this,[Object.create(e)].concat(i))};var e=function(){};return function(t,r,o,i){var c=n(arguments,1);return e.prototype=t,a.apply(this,[new e].concat(c))}}(),s=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},u=void 0!==window?window:e;t.exports={assign:a,create:c,trim:s,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:n,each:r,map:function(e,t){var n=i(e)?[]:{};return o(e,function(e,r){return n[r]=t(e,r),!1}),n},pluck:o,isList:i,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:u}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{}],6:[function(e,t,n){"use strict";t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]},{"./cookieStorage":7,"./localStorage":8,"./memoryStorage":9,"./oldFF-globalStorage":10,"./oldIE-userDataStorage":11,"./sessionStorage":12}],7:[function(e,t,n){"use strict";function r(e){for(var t=u.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(s(t[n])){var r=t[n].split("="),o=unescape(r[0]);e(unescape(r[1]),o)}}function o(e){e&&i(e)&&(u.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function i(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(u.cookie)}var a=e("../src/util"),c=a.Global,s=a.trim;t.exports={name:"cookieStorage",read:function(e){if(!e||!i(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(u.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){e&&(u.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:r,remove:o,clearAll:function(){r(function(e,t){o(t)})}};var u=c.document},{"../src/util":5}],8:[function(e,t,n){"use strict";function r(){return i.localStorage}function o(e){return r().getItem(e)}var i=e("../src/util").Global;t.exports={name:"localStorage",read:o,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},{"../src/util":5}],9:[function(e,t,n){"use strict";t.exports={name:"memoryStorage",read:function(e){return r[e]},write:function(e,t){r[e]=t},each:function(e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)},remove:function(e){delete r[e]},clearAll:function(e){r={}}};var r={}},{}],10:[function(e,t,n){"use strict";function r(e){for(var t=i.length-1;t>=0;t--){var n=i.key(t);e(i[n],n)}}var o=e("../src/util").Global;t.exports={name:"oldFF-globalStorage",read:function(e){return i[e]},write:function(e,t){i[e]=t},each:r,remove:function(e){return i.removeItem(e)},clearAll:function(){r(function(e,t){delete i[e]})}};var i=o.globalStorage},{"../src/util":5}],11:[function(e,t,n){"use strict";function r(e){return e.replace(/^\d/,"___$&").replace(u,"___")}var o=e("../src/util").Global;t.exports={name:"oldIE-userDataStorage",write:function(e,t){if(!s){var n=r(e);c(function(e){e.setAttribute(n,t),e.save(i)})}},read:function(e){if(!s){var t=r(e),n=null;return c(function(e){n=e.getAttribute(t)}),n}},each:function(e){c(function(t){for(var n=t.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var o=n[r];e(t.getAttribute(o.name),o.name)}})},remove:function(e){var t=r(e);c(function(e){e.removeAttribute(t),e.save(i)})},clearAll:function(){c(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(i)})}};var i="storejs",a=o.document,c=function(){if(!a||!a.documentElement||!a.documentElement.addBehavior)return null;var e,t,n,r="script";try{(t=new ActiveXObject("htmlfile")).open(),t.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(t){n=a.createElement("div"),e=a.body}return function(t){var r=[].slice.call(arguments,0);r.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(i),t.apply(this,r),e.removeChild(n)}}(),s=(o.navigator?o.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g")},{"../src/util":5}],12:[function(e,t,n){"use strict";function r(){return i.sessionStorage}function o(e){return r().getItem(e)}var i=e("../src/util").Global;t.exports={name:"sessionStorage",read:o,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},{"../src/util":5}]},{},[1])(1)}),orgWindowOpen=window.open,popQueue=[],currentPop=null,executeCount=0,loadLog=function(){return store.get("dwmth-pops"+selectorClass)||[]},executeProxy=function(e){for(var t=e.target;t&&t!=document.body;)"A"==t.tagName&&(executeProxyTimer||(executeProxyTimer=setTimeout(executePop,1))),t=t.parentElement},addPop=function(e,t,n,r,o,i){currentPop?popQueue.push(arguments):preparePop.apply(this,arguments)},checkPopLimits=function(e,t){if(e<=0)return!1;if(t>0){for(var n=loadLog(),r=0,o=(new Date).getTime()/1e3-3600*t,i=0,a=n.length;i<a;i++)n[i].time>=o&&r++;if(r>=e)return!1}return!0},preparePop=function(e,t,n,r,o,i){if(!checkPopLimits(n,r))return!1;if(o&&o<=executeCount)return!1;window.open=function(){return window},currentPop=arguments,addListener(document,"click",executeProxy,!0),addListener(document,"click",executeProxy,!1);for(var a=document.getElementsByTagName("a"),c=0,s=a.length;c<s;c++){var u=a[c],l=u.getAttribute("href"),d=u.getAttribute("target");l&&("pop-up"===e&&(u.setAttribute("href",t),u.setAttribute("data-orghref",l),d&&u.setAttribute("data-orgtarget",d)),u.setAttribute("target","_blank"))}return!0},executePop=function(){if(clearTimeout(executeProxyTimer),executeProxyTimer=null,currentPop){removeListener(document,"click",executeProxy,!0),removeListener(document,"click",executeProxy,!1),window.open=orgWindowOpen,executeCount++;var e=loadLog();if(e.push({time:Math.round((new Date).getTime()/1e3)}),function(e){for(var t=(new Date).getTime()/1e3-172800,n=[],r=0,o=e.length;r<o;r++){var i=e[r];i.time>=t&&n.push(i)}store.set("dwmth-pops"+selectorClass,n)}(e),currentPop[5])try{currentPop[5]()}catch(e){}if("pop-up"===currentPop[0])for(var t=document.getElementsByTagName("a"),n=0,r=t.length;n<r;n++){var o=t[n],i=o.getAttribute("data-orgtarget"),a=o.getAttribute("data-orghref");a&&(o.removeAttribute("data-orghref"),o.setAttribute("href",a)),i?(o.removeAttribute("data-orgtarget"),o.setAttribute("target",i)):o.removeAttribute("target")}else if("pop-under"===currentPop[0]){var c=currentPop[1];setTimeout(function(){window.location.href=c},2e3)}for(currentPop=null;popQueue.length>0&&!preparePop.apply(this,popQueue.shift()););}};var isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,isCriOS=!navigator.userAgent||!navigator.userAgent.match||navigator.userAgent.match("CriOS"),isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,tmp=new XMLHttpRequest;supportBinaryFetch=!isIE||tmp.upload;var iframeDataUri=!isIE&&!isEdge,requestBlob=window.Blob&&window.FileReader&&FileReader.prototype.hasOwnProperty("readAsBinaryString")&&(FileReader.prototype.hasOwnProperty("readAsDataURL")||window.URL&&URL.createObjectURL);function getDataURI(e,t){if(window.Blob&&e.blob instanceof window.Blob){if(!isCriOS&&URL&&URL.createObjectURL)t(URL.createObjectURL(e.blob));else if(window.FileReader){var n=new FileReader;n.onload=function(e){t(n.result)},n.readAsDataURL(e.blob)}}else t("data:"+e.type+";base64,"+btoa(e.bytes))}var prepareIframe=function(e){e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("marginwidth","0"),e.setAttribute("marginheight","0"),e.setAttribute("vspace","0"),e.setAttribute("hspace","0"),e.setAttribute("allowtransparency","true"),e.setAttribute("scrolling","no"),e.setAttribute("frameborder","0")},proxyScript='var isCriOS = !navigator.userAgent || !navigator.userAgent.match || navigator.userAgent.match(\'CriOS\');function getDataURI(data, callback) {\n    if (window.Blob && data.blob instanceof window.Blob) {\n        if (!isCriOS && URL && URL.createObjectURL) {\n            callback(URL.createObjectURL(data.blob));\n        } else if (window.FileReader) {\n            var reader = new FileReader();\n            reader.onload = function (e) {\n                callback(reader.result);\n            }\n            reader.readAsDataURL(data.blob);\n        }\n        return;\n    }\n    callback(\'data:\' + data.type + \';base64,\' + btoa(data.bytes));\n}var addListener = function (element, event, handler, phase) {    if (element.addEventListener) {        return element.addEventListener(event, handler, phase);    } else {        return element.attachEvent("on" + event, handler);    }};addListener(window, "message", function (event) {    var iframe = document.getElementById("frame");    if(iframe.src == "about:blank")  {       getDataURI(event.data, function(dataUri) {           iframe.src = dataUri;       });       return;    }    var targets = [iframe.contentWindow, parent];    var target;    if (event.source == targets[0]) {        target = targets[1];    }    else if(event.source == targets[1]) {        target = targets[0];    }     if(target) {        target.postMessage(event.data, "*");     }});';function createIframeFromData(e,t){var n=document.createElement("iframe");if(iframeDataUri){n.setAttribute("sandbox","allow-scripts"+(isFirefox?"":" allow-same-origin"));var r=function(r){getDataURI({blob:new Blob(["<html><head><meta http-equiv=\"Content-Security-Policy\" content=\"frame-src blob: data: 'self' 'unsafe-inline'; child-src blob: data: 'self' 'unsafe-inline'; default-src 'unsafe-inline' data: blob:\"></head><body><script>"+proxyScript+'<\/script><iframe id="frame" src="'+r+'" sandbox="allow-scripts" width="100%" height="100%" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" frameborder="0"></iframe></body></html>'],{type:"text/html"})},function(r){n.src=r,n.onload=function(){n.contentWindow.postMessage(e,"*")},t(n)})};isFirefox?r("about:blank"):getDataURI(e,r)}else n.src="about:blank",n.setAttribute("sandbox","allow-scripts allow-same-origin"),n.onload=function(){var t=function(e){var t=n.contentWindow.document,r=t.createElement("iframe");r.setAttribute("id","frame"),r.src="about:blank",prepareIframe(r);var o=t.createElement("meta");o.setAttribute("http-equiv","Content-Security-Policy"),o.setAttribute("content","frame-src data: blob:; child-src data: blob:; default-src 'unsafe-inline' data: blob:"),n.contentWindow.eval(proxyScript),setTimeout(function(){t.head.appendChild(o),t.body.appendChild(r),r.contentWindow.contents=e,r.src='javascript:window["contents"]',r.setAttribute("sandbox","allow-scripts")},1)};if(requestBlob&&e instanceof Blob){var r=new FileReader;r.onload=function(e){t(r.result)},r.readAsBinaryString?r.readAsBinaryString(e):r.readAsText(e)}else t(e.bytes)},t(n)}function createLinkFromData(e,t){if(requestBlob&&e instanceof Blob){var n=new FileReader;n.onload=function(e){t(n.result)},n.readAsBinaryString?n.readAsBinaryString(e):n.readAsText(e)}else t(e.bytes)}function createImageFromData(e,t){var n=new Image;getDataURI(e,function(r){e.originalUrl&&r.length>32e3?(n.onerror=function(){(n=new Image).src=e.originalUrl,t(n)},n.onload=function(){t(n)},n.src=r):(n.src=r,t(n))})}function getOrigin(e){if("string"==typeof e){var t=document.createElement("a");t.href=e,e=t}return e.protocol+"//"+("80"!==e.port&&"443"!==e.port?e.host:e.hostname)}function fetchURL(e,t){t=t||{};var n,r,o,i=new XMLHttpRequest;if(!supportBinaryFetch&&getOrigin(e)!=getOrigin(window.location)){i=new XDomainRequest,n=!0;var a=e,c=e.indexOf("?");e+=-1==c?"?xdr":c==e.length-1?"xdr":"&xdr",i.__parseHeaders=function(e){this.__responseHeaders={};e=e.split("\n");for(var t=0;t<e.length;t++){var n=e[t].indexOf(":");this.__responseHeaders[e[t].substring(0,n)]=e[t].substr(n+1)}},i.getResponseHeader=function(e){return this.__responseHeaders[e]}}if(!n)try{t.noCredentials||(i.withCredentials=!0)}catch(e){}if(t.binary&&requestBlob){try{i.responseType="blob"}catch(e){requestBlob=!1}"blob"!=i.responseType&&(requestBlob=!1)}return t.binary&&!requestBlob&&i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.open(t.method||"GET",e),fetchURL.timeout&&(i.timeout=fetchURL.timeout),i.ontimeout=function(e){o&&o()},i.then=function(e,t){r=e,o=t},n?(i.onerror=i.ontimeout,i.onload=function(){var e={bytes:i.responseText,type:i.contentType};if(-1!=e.type.indexOf("text/base64")){e.type=e.type.split(",")[1];var n=e.bytes.indexOf("\n\n");-1!=n?(i.__parseHeaders(e.bytes.substring(0,n)),e.bytes=atob(e.bytes.substr(n+2))):e.bytes=atob(e.bytes),e.originalUrl=a}t.json&&(e=JSON.parse(e.bytes)),r&&r(e,i)}):i.onreadystatechange=function(){if(4==i.readyState){var e=i.status>=200&&i.status<400?r:o;if(e){var n;if(t.binary)try{if(requestBlob){var a=new FileReader;return a.onload=function(t){n={bytes:a.result,type:i.response.type,blob:i.response},e&&e(n,i)},void(a.readAsBinaryString?a.readAsBinaryString(i.response):a.readAsText(i.response))}var c;try{c=i.responseBody.toArray()}catch(e){}if(c){for(var s=0,u=c.length,l=[];s<u;)l.push(String.fromCharCode.apply(String,c.slice(s,s+1e4))),s+=1e4;n={bytes:n=l.join(""),type:i.getResponseHeader("Content-Type")}}else n={bytes:t.binary?i.responseText.replace(/.{1}/g,function(e){return String.fromCharCode(255&e.charCodeAt(0))}):i.responseText,type:i.getResponseHeader("Content-Type")}}catch(e){n=null}else n={bytes:i.responseText,type:i.getResponseHeader("Content-Type")};if(t.json)try{n=JSON.parse(n.bytes)}catch(e){return void(o&&o())}e&&e(n,i)}}},setTimeout(function(){t.post?(i.setRequestHeader&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(t.post)):i.send()},0),i}var running=[],sha1=function e(t,n){if(!n.$delayed&&(running.push([t,n]),running.length>1))n.$delayed=!0;else{try{crypto.subtle.digest("SHA-1",t).then(function(e){n(hex(e))}).catch(function(e){n("NO_SUPPORT")})}catch(e){n("NO_SUPPORT")}running.shift(),running.length>=1&&setTimeout(e.bind(this,running[0][0],running[0][1]),0)}},hex=function(e){for(var t=[],n=new DataView(e),r=0;r<n.byteLength;r+=4){var o=("00000000"+n.getUint32(r).toString(16)).slice(-"00000000".length);t.push(o)}return t.join("")},sha1_async=function(e,t){if(window.Blob&&e instanceof Blob){var n=new FileReader;n.onload=function(e){sha1(n.result,t)},n.readAsArrayBuffer(e)}else{var r=new Uint8Array(e.bytes.length);for(i=0,len=e.bytes.length;i<len;i++)r[i]=e.bytes.charCodeAt(i);sha1(r,function(e){t(e)})}},insertBackfill=(runScriptTypes=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"],scriptsDone=function(){var e=document.createEvent("Event");e.initEvent("DOMContentLoaded",!0,!0),document.dispatchEvent(e)},runScripts=function(e){var t,n=[];[].forEach.call(e,function(e){(t=e.getAttribute("type"))&&-1===runScriptTypes.indexOf(t)||n.push(function(t){!function(e,t){var n=document.createElement("script");n.type="text/javascript",e.src?(n.onload=t,n.onerror=t,n.src=e.src):n.textContent=e.innerText,e.parentNode.replaceChild(n,e),e.src||t()}(e,t)})}),function e(t,n,r){void 0===r&&(r=0),0!=t.length?t[r](function(){++r===t.length?n():e(t,n,r)}):n()}(n,scriptsDone)},function(e,t){if(t){var n=document.createDocumentFragment(),r=document.createElement("div");r.innerHTML=t.trim(),1==r.childNodes.length&&8===r.firstChild.nodeType&&(r.innerHTML=r.firstChild.textContent);for(var o=r.querySelectorAll("script");r.firstChild;)n.appendChild(r.firstChild);e.parentNode.replaceChild(n,e),runScripts(o)}}),runScriptTypes,scriptsDone,runScripts,BlockDetector=function(e){this._options={loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"},this._var={bait:null,checking:!1,loop:null,loopNumber:0,detected:null,event:{detected:[],notDetected:[]}},void 0!==e&&this.setOption(e)};BlockDetector.prototype._options=null,BlockDetector.prototype._var=null,BlockDetector.prototype._bait=null,BlockDetector.prototype.setOption=function(e,t){if(void 0!==t){var n=e;(e={})[n]=t}for(var r in e)this._options[r]=e[r];return this},BlockDetector.prototype._creatBait=function(){var e=document.createElement("div");e.setAttribute("class",this._options.baitClass),e.setAttribute("style",this._options.baitStyle),this._var.bait=window.document.body.appendChild(e)},BlockDetector.prototype._destroyBait=function(){window.document.body.removeChild(this._var.bait),this._var.bait=null},BlockDetector.prototype.check=function(e){if(void 0===e&&(e=!0),!0===this._var.checking)return!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,!0===e&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),!0},BlockDetector.prototype._checkBait=function(e){var t=!1;if(null===this._var.bait&&this._creatBait(),null===window.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(t=!0),void 0!==window.getComputedStyle){var n=window.getComputedStyle(this._var.bait,null);!n||"none"!=n.getPropertyValue("display")&&"hidden"!=n.getPropertyValue("visibility")||(t=!0)}!0===e&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===t?(this._var.detected=!0,this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===e&&(this._var.checking=!1)):null!==this._var.loop&&!1!==e||(this._var.detected=!1,this._destroyBait(),this.emitEvent(!1),!0===e&&(this._var.checking=!1))},BlockDetector.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0},BlockDetector.prototype.emitEvent=function(e){var t=this._var.event[!0===e?"detected":"notDetected"];for(var n in t)t.hasOwnProperty(n)&&t[n]();return this._var.event.detected=[],this._var.event.notDetected=[],this},BlockDetector.prototype.detect=function(e,t){"function"==typeof e&&this._var.event.detected.push(e),"function"==typeof t&&this._var.event.notDetected.push(t),null===this._var.detected?this.check():this.emitEvent(this._var.detected)};var serverOrigin="https://kayakm.com",aduserOrigin="https://gitoku.com",selectorClass="._fa7cdd4c68507744",topwin=window;try{for(;topwin.parent!=topwin&&topwin.parent.document;)topwin=topwin.parent}catch(e){}var topdoc=topwin.document,winOpen=(open=topwin.open,function(){return open.apply(topwin,arguments)}),open,encodeZones=function(e){for(var t={},n=0,r=[null],o=0;o<e.length;o++){var i=e[o],a=[];for(var c in i)i.hasOwnProperty(c)&&(t[c]||(t[c]=n++),a.push(t[c]+"\t"+i[c]));r.push(a.join("\r"))}a=[];for(var c in t)t.hasOwnProperty(c)&&a.push(c),r[0]=a.join("\t");return UrlSafeBase64Encode(r.join("\n"))},dwmthACL=[],dwmthURLS=[],replaceTag=function(e,t){for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n].name;0!=r.indexOf("data-")&&t.setAttribute(r,e.getAttribute(r))}t.style.overflow="hidden",t.style.position="relative";for(var o=[];t.firstChild;)o.push(t.removeChild(t.firstChild));e.parentNode.replaceChild(t,e),setTimeout(function(){for(;o.length>0;)t.appendChild(o.shift())},0)},prepareElement=function(e,t,n,r){var o=document.createElement("div"),i=prepareInfoBox(e,t,r);if(o.appendChild(i),"IFRAME"==n.tagName)prepareIframe(n),addListener(window,"message",function(t){if(t.source==n.contentWindow&&t.data){var r,o="string"==typeof t.data;if((r=o?JSON.parse(t.data):t.data).dwmthLoad){var i={dwmthLoad:1,data:e};t.source.postMessage(o?JSON.stringify(i):i,"*")}else if(r.dwmthClick){if(document.activeElement!=n)return void console.log("click without mouse interaction");if(!isVisible(n))return void console.log("invisible click");var a=e.click_url;winOpen(a,"_blank")||(topwin.location.href=a),document.activeElement.blur()}}}),o.appendChild(n);else{n.border="0";var a=document.createElement("a");a.target="_blank",a.href=e.click_url,a.appendChild(n),o.appendChild(a)}return o},prepareInfoBox=function(e,t,n){var r=addUrlParam(serverOrigin+"/supply/why",{bid:t.id,cid:e.cid,ctx:n,iid:getImpressionId(),url:t.serve_url}),o=document.createElement("div");o.setAttribute("style","position: absolute !important; top: 0px !important; right: 0px !important;background-color: #fff !important");var i=document.createElement("a");return i.target="_blank",i.href=r,i.setAttribute("style","text-decoration: none !important;background-color: #fff !important"),i.innerHTML='<svg style="width: 16px; height: 16px; display: block;" version="1.1" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path d="m11.405 1.9861v6.798c0 0.0309-0.0019 0.0617-0.0037 0.0902a1.1895 1.1895 0 0 1 -0.3426 0.77162 1.1192 1.1192 0 0 1 -0.8315 0.35834h-0.0037q-0.48088 0-0.82718-0.35865a1.1988 1.1988 0 0 1 -0.3463 -0.86205v-2e-3c0-0.0253 0-0.0503 0.00187-0.0753-0.0028-0.67655-0.15649-1.2988-0.45989-1.8602a4.3519 4.3519 0 0 0 -0.77725 -1.0493q-0.15247-0.15432-0.31235-0.28796-1.1016-0.92595-2.5596-0.9528c-0.030893 0-0.059919-2e-3 -0.090438-2e-3q-1.8417 0-3.097 1.2186-1.2553 1.2185-1.255 3.0031v8e-3q0.0028 1.747 1.2546 2.9868 1.2519 1.2398 3.0248 1.2429 1.3062 0 2.3303-0.67687-0.14908-0.12593-0.29167-0.26667c-0.6852-0.67903-1.1074-1.4744-1.2608-2.3741a1.1111 1.1111 0 0 1 -0.78613 0.31018q-0.48119 0-0.82717-0.35864a1.1982 1.1982 0 0 1 -0.3463 -0.86369q0-0.51297 0.34229-0.8676a1.1111 1.1111 0 0 1 0.61112 -0.3352 1.2185 1.2185 0 0 1 0.22007 -0.0198 1.117 1.117 0 0 1 0.72038 0.24692c0.024733 0.0225 0.049092 0.0456 0.072798 0.0701a1.4213 1.4213 0 0 1 0.36853 0.66792 1.3917 1.3917 0 0 1 0.020066 0.23827 4.4245 4.4245 0 0 0 0.087078 0.87626c0.14044 0.78365 0.50895 1.4652 1.1173 2.0679 0.098147 0.0972 0.33334 0.30063 0.34846 0.31328q1.0781 0.90033 2.5 0.96638c0.07252 4e-3 0.14599 5e-3 0.21976 6e-3h0.0047c0.96607 0 2.0105-0.21236 3.0195-1.2389 1.009-1.0266 1.2503-2.1661 1.2503-2.9886v-6.7992zm-1.9874 5.9023a1.1093 1.1093 0 0 1 0.80588 -0.32964h0.0037a1.1161 1.1161 0 0 1 0.7386 0.26389v-3.2195a4.2837 4.2837 0 0 0 -0.66113 -0.0515c-0.02623 0-0.05124 3e-3 -0.07746 4e-3q-1.3581 0.0194-2.3923 0.70773 0.18519 0.15185 0.35772 0.32654c0.65742 0.66175 1.0676 1.4324 1.2247 2.2991z" fill="#5fb2f9" stroke-width=".030865"/></svg>',o.appendChild(i),o};function isRendered(e){if(1!=e.nodeType)return!0;for(;e!=document.body;){if(!window.getComputedStyle)return!e.currentStyle||"none"!=e.currentStyle.display&&"hidden"!=e.currentStyle.visibility;var t=document.defaultView.getComputedStyle(e,null);if("none"==t.getPropertyValue("display")||"hidden"==t.getPropertyValue("visibility"))return!1;e=e.parentNode}return!0}function viewSizeWin(e){var t=e.document,n=t.compatMode&&"CSS1Compat"===t.compatMode?t.documentElement:t.body,r=n.clientWidth,o=n.clientHeight;return e.innerWidth&&r>e.innerWidth&&(r=e.innerWidth,o=e.innerHeight),{width:r,height:o,left:0,top:0,right:r,bottom:o}}function locateFrameElement(e,t){for(var n=e.document.getElementsByTagName("iframe"),r=0,o=n.length;r<o;r++)if(n[r].contentWindow==t)return n[r];return null}function viewSize(){for(var e=window,t=viewSizeWin(e);e!=topwin;){var n=viewSizeWin(e.parent),r=getBoundRect(locateFrameElement(e.parent,e)),o=rectIntersect(n,r);o.left-=r.left,o.right-=r.left,o.top-=r.top,o.bottom-=r.top,t=rectIntersect(t,o),e=e.parent}return t}function rectIntersect(e,t){var n=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),o=Math.max(e.top,t.top),i=Math.min(e.top+e.height,t.top+t.height);return r>=n&&i>=o&&{left:n,top:o,width:r-n,height:i-o,bottom:i,right:r}}function getBoundRect(e,t){var n=0,r=0,o=e.offsetWidth,i=e.offsetHeight;if(t){var a=e.ownerDocument.defaultView.getComputedStyle(e);"visible"==a.overflowX&&(o=2e5,n=-1e5),"visible"==a.overflowY&&(i=2e5,r=-1e5)}var c=e.getBoundingClientRect();return{top:c.top+r,bottom:c.top+r+i,left:c.left+n,right:c.left+n+o,width:o,height:i}}var isWindowVisible=function(){var e,t,n;if(void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),void 0===document.addEventListener||void 0===e)n=!0;else{var r=function(){n=!document[e]};document.addEventListener(t,r,!1),r()}return function(){return n}}(),isOccluded=function(e,t){if(!e)return!0;e:for(var n=0;n<10;n++){for(var r=document.elementFromPoint(Math.floor(e.left+Math.random()*e.width),Math.floor(e.top+Math.random()*e.height));r;){if(r==t)continue e;r=r.parentElement}return!0}return!1},isVisible=function(e){if(!isRendered(e)||!isWindowVisible())return!1;var t=e,n=getBoundRect(e),r=n,o=n.width*n.height;for(e=e.parentElement;e.parentElement;){if(((r=rectIntersect(r,getBoundRect(e,!0)))?r.width*r.height:0)<o/2)return!1;e=e.parentElement}return r=rectIntersect(r,viewSize()),!isOccluded(r,t)&&(r?r.width*r.height:0)>=o/2},impressionId,getImpressionId=function(){return impressionId||(impressionId=UrlSafeBase64Encode(getRandId(16))),impressionId},getCid=function(){var e,t,n,r=getRandId(15)+"\0",o="";for(e=0,t=r.length;e<t;e++)o+=(n=r.charCodeAt(e).toString(16)).length<2?"0"+n:n;return o},getRandId=function(e){for(var t=(new Date).getTime(),n=[],r=0;r<e;r++){var o=(t+256*Math.random())%256|0;t=Math.floor(t/256),n.push(String.fromCharCode(o))}return n.join("")},aduserPixel=function(e){if(aduserOrigin){var t=serverOrigin+"/supply/register?iid=",n=t+e;if(!dwmthURLS[n])if(!document.querySelectorAll('iframe[src^="'+t+'"]').length){var r=createIframeFromUrl(n);document.body.appendChild(r),dwmthACL.push(r.contentWindow),dwmthURLS[n]=1}}},createIframeFromUrl=function(e,t){var n=(t||document).createElement("iframe");return n.setAttribute("style","display:none"),n.setAttribute("width",1),n.setAttribute("height",1),n.setAttribute("sandbox","allow-scripts allow-same-origin"),n.src=e,n},getPageKeywords=function(e){var t=e.querySelector("meta[name=keywords]");if(null===t)return"";if(t.content){for(var n=t.content.replace(/[\t\r\n]/g,",").split(","),r=Math.min(10,n.length),o=[],i=0;i<r;i++)o.push(n[i].trim());return o.join(",")}return""},getBrowserContext=function(){return{iid:getImpressionId(),frame:topwin==top?0:1,width:topwin.screen.width,height:topwin.screen.height,url:topwin.location.href,keywords:getPageKeywords(topdoc),ref:topdoc.referrer,pop:null!==topwin.opener&&void 0!==topwin.opener?1:0}},findBackfillCode=function(e){var t=e.querySelectorAll('[type="app/backfill"]')[0],n=null;if(t)n=t.textContent;else for(var r=0,o=e.childNodes.length;r<o;r++)if(8===e.childNodes[r].nodeType){n=e.childNodes[r].textContent;break}return n?n.replace("<*!--","\x3c!--").replace("--*>","--\x3e"):null},parseZoneOptions=function(e){var t={};if("string"!=typeof e)return t;for(var n=e.split(","),r=0;r<n.length;r++){var o=n[r].trim().split("=",2);t[o[0]]=1==o.length||o[1]}return t},abd,getActiveZones=function(e){for(var t=document.querySelectorAll(selectorClass+"[data-zone]"),n=t.length,r=[],o=0;o<n;o++)r[o]=t[o];if(0!=n){var i,a=[];a.push(getBrowserContext());var c,s=[],u=0,l=0;if(r.forEach(function(e,t){var n;if(!(e=r[t]).__dwmth){e.__dwmth=1,(i={}).width=parseInt(e.offsetWidth)||parseInt(e.style.width)||0,i.height=parseInt(e.offsetHeight)||parseInt(e.style.height)||0;for(var o=0,c=e.attributes.length;o<c;o++){var d=e.attributes[o].name.split("-");"data"==d.shift()&&void 0===i[d.join("-")]&&(i[d.join("-")]=e.attributes[o].value)}i.zone&&(u++,a.push(i),n=s[t]={id:i.zone,width:i.width,height:i.height,options:parseZoneOptions(i.options),destElement:e},$isset(n.options.count)&&$isset(n.options.interval)&&(checkPopLimits(n.options.count,n.options.interval)||(n.__invalid=!0,i.__invalid=!0)),n.backfill=findBackfillCode(e),n.options.adblock_only&&(l++,(abd=abd||new BlockDetector).detect(function(){l--},function(){n.__invalid=!0,i.__invalid=!0,l--,insertBackfill(e,n.backfill)})))}}),0!=u)(c=function(){if(l>0)setTimeout(c,50);else{var t=function(e){return!e.__invalid};e(s.filter(t),a.filter(t))}})()}},extraBannerCheck=function(e,t){try{return new topwin.Function("banner",t)(e)}catch(e){return!1}},bannersToLoad=0,bannerLoaded=function(){--bannersToLoad<=0&&allBannersLoaded()};domReady(function(){aduserPixel(getImpressionId()),getActiveZones(function(e,t){var n=encodeZones(t),r=serverOrigin+"/supply/find",o={json:!0};n.length<=800?r+="?"+n:(o.method="post",o.post=n),fetchURL(r,o).then(function(n){bannersToLoad=0,n.forEach(function(n,r){var o=e[r]||{options:{}};n&&"object"==_typeof2(n)&&(!n.extra_check||extraBannerCheck(n,n.extra_check))?(n.destElement=o.destElement,n.backfill=o.backfill,o.options.min_cpm>n.rpm?insertBackfill(o.destElement,o.backfill):(bannersToLoad++,fetchBanner(n,{page:t[0],zone:t[r+1]||{}},o.options))):insertBackfill(o.destElement,o.backfill)})},function(){e.forEach(function(e,t){e.destElement?insertBackfill(e.destElement,e.backfill):console.log("no element to replace")}),allBannersLoaded()}),addListener(topwin,"message",function(t){var n;dwmthACL.some(function(e){try{return e&&e===t.source}catch(e){return!1}})&&t.data&&((n="string"==typeof t.data?JSON.parse(t.data):t.data).insertElem&&n.insertElem.forEach(function(t){if(!(dwmthACL.length>=5*e.length))if("iframe"==t.type){if(dwmthURLS[t.url])return;var n=addTrackingIframe(t.url);dwmthACL.push(n.contentWindow),dwmthURLS[t.url]=1}else if("img"==t.type){if(dwmthURLS[t.url])return;addTrackingImage(t.url),dwmthACL.push(null),dwmthURLS[t.url]=1}}))})})});var addTrackingIframe=function(e){if(e){var t=createIframeFromUrl(e,topdoc);return topdoc.body.appendChild(t),setTimeout(function(){t.parentElement.removeChild(t)},1e4),t}},addTrackingImage=function(e){if(e){var t=new Image;return t.setAttribute("style","display:none"),t.setAttribute("width",1),t.setAttribute("height",1),t.src=e,topdoc.body.appendChild(t),t}},fillPlaceholders=function(e,t,n,r,o,i,a){return(e=-1===e.indexOf("{cid}")?addUrlParam(e,"cid",t):e.replace("{cid}",t)).replace("{bid}",n).replace("{pid}",r).replace("{aid}",o).replace("{sid}",i).replace("{zid}",a)},getDomain=function(e){var t=document.createElement("a");t.href=e;var n=0===t.host.indexOf("www.")?t.host.substr(4):t.host,r=n.indexOf(":");return-1==r?n:n.substr(0,r)},popCandidates=[],addPopCandidate=function(e,t){popCandidates.push({args:e,rpm:t})};function shuffle(e){var t,n,r=e.length;if(r)for(;--r;)t=e[n=Math.floor(Math.random()*(r+1))],e[n]=e[r],e[r]=t;return e}var allBannersLoaded=function(){var e=popCandidates.some(function(e){return null===e.rpm});e?shuffle(popCandidates):popCandidates.sort(function(t,n){return e?Math.random()>.5?-1:1:t.rpm>=n.rpm?-1:1}),popCandidates.forEach(function(e){addPop.apply(this,e.args)})},fetchBanner=function(e,t,n){fetchURL(e.serve_url,{binary:!0,noCredentials:!0}).then(function(r,o){t.cid=getCid(),t.page.zone=t.zone.zone||e.zone_id;var i=encodeZones([t.page]);t.click_url=addUrlParam(e.click_url,{cid:t.cid,pto:e.pay_to,pfr:e.pay_from,ctx:i,iid:getImpressionId()}),t.view_url=addUrlParam(e.view_url,{cid:t.cid,pto:e.pay_to,pfr:e.pay_from,ctx:i,iid:getImpressionId()});var a=function(){var o;if("image"==e.type)o=createImageFromData;else if("html"==e.type)o=createIframeFromData;else if("direct"==e.type)return void createLinkFromData(r,function(r){r.length>1024&&(r=e.serve_url),r=fillPlaceholders(r,t.cid,e.id,e.publisher_id,e.pay_to,getDomain(t.page.url),e.zone_id),addPopCandidate([e.size,r,$pick(n.count,1),$pick(n.interval,1),$pick(n.burst,1),function(){dwmthACL.push(addTrackingIframe(t.view_url).contentWindow)}],e.rpm)});o(r,function(n){e.destElement?(n=prepareElement(t,e,n),replaceTag(e.destElement,n),function(e){var n=setInterval(function(){isVisible(e)&&(clearInterval(n),dwmthACL.push(addTrackingIframe(t.view_url).contentWindow))},1e3)}(n)):console.log("warning: no element to replace")})},c=function(){if("direct"!=e.type&&e.destElement)if(isVisible(e.destElement))a();else{var t,n=0;setTimeout(t=function(){isVisible(e.destElement)?a():setTimeout(t,n++<10?200:1e3)},100)}else a()};e.creative_sha1?sha1_async(r,function(t){"NO_SUPPORT"===t||t==e.creative_sha1?("NO_SUPPORT"===t&&console.log("warning: hash not checked"),c()):(console.log("hash error",e,t),insertBackfill(e.destElement,e.backfill))}):c(),bannerLoaded()},function(){console.log("could not fetch url",e),insertBackfill(e.destElement,e.backfill),bannerLoaded()})}}(window,document);
